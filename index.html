<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HSK一级汉语拼音学习</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "PingFang SC", "Helvetica Neue", Arial, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 25px;
            background: linear-gradient(135deg, #1a73e8, #6c8ef5);
            color: white;
            border-radius: 15px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        h1 {
            font-size: 2rem;
            margin-bottom: 8px;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .nav-tabs {
            display: flex;
            background-color: white;
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 25px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        
        .tab {
            flex: 1;
            padding: 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .tab i {
            margin-right: 8px;
        }
        
        .tab.active {
            background: linear-gradient(135deg, #1a73e8, #6c8ef5);
            color: white;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .section-title {
            margin: 25px 0 18px;
            padding-bottom: 10px;
            border-bottom: 2px solid #1a73e8;
            font-size: 1.4rem;
            color: #1a73e8;
            display: flex;
            align-items: center;
        }
        
        .section-title i {
            margin-right: 10px;
            font-size: 1.2rem;
        }
        
        .phonetics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .phonetic-card {
            background-color: white;
            border-radius: 10px;
            padding: 15px 8px;
            text-align: center;
            box-shadow: 0 3px 8px rgba(0,0,0,0.08);
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .phonetic-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.12);
        }
        
        .phonetic-card:active {
            transform: translateY(0);
        }
        
        .phonetic-card.playing {
            background-color: #e8f0fe;
            box-shadow: 0 0 0 2px #1a73e8;
        }
        
        .phonetic-symbol {
            font-size: 1.8rem;
            margin-bottom: 8px;
            color: #1a73e8;
            font-weight: bold;
        }
        
        .phonetic-name {
            font-size: 0.75rem;
            color: #666;
            margin-bottom: 10px;
        }
        
        .card-controls {
            display: flex;
            justify-content: center;
            gap: 8px;
        }
        
        .play-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background-color: #1a73e8;
            color: white;
            border-radius: 50%;
            font-size: 0.9rem;
            transition: all 0.2s;
            cursor: pointer;
        }
        
        .play-btn:hover {
            background-color: #0d62d9;
            transform: scale(1.1);
        }
        
        .practice-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 18px;
        }
        
        .practice-card {
            background-color: white;
            border-radius: 12px;
            padding: 20px 15px;
            text-align: center;
            box-shadow: 0 3px 8px rgba(0,0,0,0.08);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .practice-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.12);
        }
        
        .practice-card:active {
            transform: translateY(0);
        }
        
        .practice-card.playing {
            background-color: #e8f0fe;
            box-shadow: 0 0 0 2px #1a73e8;
        }
        
        .pinyin {
            font-size: 1.6rem;
            margin-bottom: 8px;
            color: #1a73e8;
            font-weight: bold;
        }
        
        .character {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }
        
        .meaning {
            font-size: 0.95rem;
            color: #666;
            margin-bottom: 12px;
        }
        
        .audio-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 25px;
            flex-wrap: wrap;
        }
        
        .audio-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px 20px;
            background: linear-gradient(135deg, #1a73e8, #6c8ef5);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 3px 8px rgba(0,0,0,0.15);
        }
        
        .audio-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 12px rgba(0,0,0,0.2);
        }
        
        .audio-btn:active {
            transform: translateY(0);
        }
        
        .audio-btn i {
            margin-right: 8px;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #666;
            font-size: 0.85rem;
            border-top: 1px solid #e0e0e0;
        }
        
        .instructions {
            background-color: #e8f0fe;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-size: 0.9rem;
            color: #1a73e8;
            border-left: 4px solid #1a73e8;
        }
        
        .tone-explanation {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .tone-item {
            flex: 1;
            min-width: 120px;
            background-color: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .tone-symbol {
            font-size: 1.8rem;
            margin-bottom: 8px;
            color: #1a73e8;
        }
        
        .tone-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .tone-desc {
            font-size: 0.85rem;
            color: #666;
        }
        
        .admin-section {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.08);
            border-left: 4px solid #fbbc05;
        }
        
        .admin-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: #fbbc05;
            display: flex;
            align-items: center;
        }
        
        .admin-title i {
            margin-right: 10px;
        }
        
        .admin-controls {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .admin-select {
            flex: 1;
            min-width: 200px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }
        
        .file-input-wrapper {
            position: relative;
            flex: 1;
            min-width: 200px;
        }
        
        .file-input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
            background-color: white;
        }
        
        .admin-button {
            padding: 10px 20px;
            background: linear-gradient(135deg, #fbbc05, #f9ab00);
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .admin-button:hover {
            background: linear-gradient(135deg, #e6a203, #e59400);
        }
        
        .audio-status {
            margin-top: 15px;
            padding: 10px;
            border-radius: 5px;
            font-size: 0.9rem;
        }
        
        .audio-status.success {
            background-color: #e6f4ea;
            color: #137333;
            border: 1px solid #34a853;
        }
        
        .audio-status.error {
            background-color: #fce8e6;
            color: #c5221f;
            border: 1px solid #ea4335;
        }
        
        @media (max-width: 768px) {
            .phonetics-grid {
                grid-template-columns: repeat(auto-fill, minmax(85px, 1fr));
                gap: 12px;
            }
            
            .practice-grid {
                grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
                gap: 15px;
            }
            
            .section-title {
                font-size: 1.2rem;
            }
            
            .tone-explanation {
                flex-direction: column;
            }
            
            .admin-controls {
                flex-direction: column;
            }
            
            .vocab-grid, .sentence-grid {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            }
        }
        
        .vocab-grid, .sentence-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 18px;
            margin-bottom: 30px;
        }
        
        .vocab-card, .sentence-card {
            background-color: white;
            border-radius: 12px;
            padding: 20px 15px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.08);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .vocab-card:hover, .sentence-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.12);
        }
        
        .vocab-card:active, .sentence-card:active {
            transform: translateY(0);
        }
        
        .vocab-card.playing, .sentence-card.playing {
            background-color: #e8f0fe;
            box-shadow: 0 0 0 2px #1a73e8;
        }
        
        .vocab-pinyin, .sentence-pinyin {
            font-size: 1.4rem;
            margin-bottom: 8px;
            color: #1a73e8;
            font-weight: bold;
        }
        
        .vocab-character, .sentence-character {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .vocab-meaning, .sentence-meaning {
            font-size: 0.95rem;
            color: #666;
            margin-bottom: 12px;
        }
        
        .vocab-translation, .sentence-translation {
            font-size: 0.9rem;
            color: #888;
            font-style: italic;
            margin-bottom: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>HSK一级汉语拼音学习</h1>
            <div class="subtitle">拼音学习与拼读练习 - 完整版</div>
        </header>
        
        <div class="instructions">
            <i class="fas fa-info-circle"></i> 点击拼音卡片可以听到标准发音，跟随练习提高汉语水平。
        </div>
        
        <div class="nav-tabs">
            <div class="tab active" data-tab="phonetics">
                <i class="fas fa-volume-up"></i> 拼音学习
            </div>
            <div class="tab" data-tab="practice">
                <i class="fas fa-book-reader"></i> 拼读练习
            </div>
            <div class="tab" data-tab="vocab">
                <i class="fas fa-book"></i> 生词学习
            </div>
            <div class="tab" data-tab="sentences">
                <i class="fas fa-comment"></i> 句子练习
            </div>
            <div class="tab" data-tab="tones">
                <i class="fas fa-music"></i> 声调说明
            </div>
        </div>
        
        <div class="tab-content active" id="phonetics">
            <h2 class="section-title">
                <i class="fas fa-comment-dots"></i> 声母 (Initials)
            </h2>
            <div class="phonetics-grid" id="initials-container">
                <!-- 声母将通过JavaScript动态生成 -->
            </div>
            
            <h2 class="section-title">
                <i class="fas fa-comments"></i> 韵母 (Finals)
            </h2>
            <div class="phonetics-grid" id="finals-container">
                <!-- 韵母将通过JavaScript动态生成 -->
            </div>
            
            <h2 class="section-title">
                <i class="fas fa-music"></i> 韵母声调 (Finals with Tones)
            </h2>
            
            <h3 class="section-title" style="font-size: 1.2rem; color: #666;">
                <i class="fas fa-comments"></i> 单韵母声调 (Simple Finals with Tones)
            </h3>
            <div class="phonetics-grid" id="simple-finals-tones-container">
                <!-- 单韵母声调将通过JavaScript动态生成 -->
            </div>
            
            <h3 class="section-title" style="font-size: 1.2rem; color: #666;">
                <i class="fas fa-comments"></i> 复韵母声调 (Compound Finals with Tones)
            </h3>
            <div class="phonetics-grid" id="compound-finals-tones-container">
                <!-- 复韵母声调将通过JavaScript动态生成 -->
            </div>
            
            <h3 class="section-title" style="font-size: 1.2rem; color: #666;">
                <i class="fas fa-comments"></i> 鼻韵母声调 (Nasal Finals with Tones)
            </h3>
            <div class="phonetics-grid" id="nasal-finals-tones-container">
                <!-- 鼻韵母声调将通过JavaScript动态生成 -->
            </div>
            
            <h3 class="section-title" style="font-size: 1.2rem; color: #666;">
                <i class="fas fa-comments"></i> 特殊韵母声调 (Special Finals with Tones)
            </h3>
            <div class="phonetics-grid" id="special-finals-tones-container">
                <!-- 特殊韵母声调将通过JavaScript动态生成 -->
            </div>
            
            <div class="audio-controls">
                <button class="audio-btn" id="play-all-initials">
                    <i class="fas fa-play"></i> 播放所有声母
                </button>
                <button class="audio-btn" id="play-all-finals">
                    <i class="fas fa-play"></i> 播放所有韵母
                </button>
                <button class="audio-btn" id="play-all-simple-tones">
                    <i class="fas fa-play"></i> 播放所有单韵母声调
                </button>
                <button class="audio-btn" id="play-all-compound-tones">
                    <i class="fas fa-play"></i> 播放所有复韵母声调
                </button>
            </div>
        </div>
        
        <div class="tab-content" id="practice">
            <h2 class="section-title">
                <i class="fas fa-graduation-cap"></i> 拼读练习 (Practice)
            </h2>
            <div class="practice-grid" id="practice-container">
                <!-- 练习内容将通过JavaScript动态生成 -->
            </div>
            
            <h2 class="section-title">
                <i class="fas fa-graduation-cap"></i> 韵母声调练习 (Finals Tone Practice)
            </h2>
            <div class="practice-grid" id="tone-practice-container">
                <!-- 韵母声调练习将通过JavaScript动态生成 -->
            </div>
            
            <div class="audio-controls">
                <button class="audio-btn" id="play-all-practice">
                    <i class="fas fa-play-circle"></i> 播放所有练习
                </button>
                <button class="audio-btn" id="shuffle-practice">
                    <i class="fas fa-random"></i> 随机排序
                </button>
            </div>
        </div>
        
        <div class="tab-content" id="vocab">
            <h2 class="section-title">
                <i class="fas fa-book"></i> HSK一级生词 (HSK Level 1 Vocabulary)
            </h2>
            <div class="vocab-grid" id="vocab-container">
                <!-- 生词将通过JavaScript动态生成 -->
            </div>
            
            <div class="audio-controls">
                <button class="audio-btn" id="play-all-vocab">
                    <i class="fas fa-play-circle"></i> 播放所有生词
                </button>
                <button class="audio-btn" id="shuffle-vocab">
                    <i class="fas fa-random"></i> 随机排序
                </button>
            </div>
        </div>
        
        <div class="tab-content" id="sentences">
            <h2 class="section-title">
                <i class="fas fa-comment"></i> HSK一级句子 (HSK Level 1 Sentences)
            </h2>
            <div class="sentence-grid" id="sentence-container">
                <!-- 句子将通过JavaScript动态生成 -->
            </div>
            
            <div class="audio-controls">
                <button class="audio-btn" id="play-all-sentences">
                    <i class="fas fa-play-circle"></i> 播放所有句子
                </button>
                <button class="audio-btn" id="shuffle-sentences">
                    <i class="fas fa-random"></i> 随机排序
                </button>
            </div>
        </div>
        
        <div class="tab-content" id="tones">
            <h2 class="section-title">
                <i class="fas fa-music"></i> 汉语声调 (Chinese Tones)
            </h2>
            
            <div class="tone-explanation">
                <div class="tone-item">
                    <div class="tone-symbol">ˉ</div>
                    <div class="tone-name">第一声 (First Tone)</div>
                    <div class="tone-desc">高平调，音高保持稳定</div>
                </div>
                <div class="tone-item">
                    <div class="tone-symbol">ˊ</div>
                    <div class="tone-name">第二声 (Second Tone)</div>
                    <div class="tone-desc">升调，从中音升到高音</div>
                </div>
                <div class="tone-item">
                    <div class="tone-symbol">ˇ</div>
                    <div class="tone-name">第三声 (Third Tone)</div>
                    <div class="tone-desc">降升调，先降后升</div>
                </div>
                <div class="tone-item">
                    <div class="tone-symbol">ˋ</div>
                    <div class="tone-name">第四声 (Fourth Tone)</div>
                    <div class="tone-desc">降调，从高音降到低音</div>
                </div>
                <div class="tone-item">
                    <div class="tone-symbol">(无)</div>
                    <div class="tone-name">轻声 (Neutral Tone)</div>
                    <div class="tone-desc">轻短，没有固定音高</div>
                </div>
            </div>
            
            <h2 class="section-title">
                <i class="fas fa-volume-up"></i> 声调示例 (Tone Examples)
            </h2>
            <div class="practice-grid" id="tones-examples-container">
                <!-- 声调示例将通过JavaScript动态生成 -->
            </div>
        </div>
        
        <div class="admin-section">
            <div class="admin-title">
                <i class="fas fa-user-shield"></i> 管理员音频上传
            </div>
            
            <div class="admin-controls">
                <select class="admin-select" id="audio-type">
                    <option value="">选择拼音类型</option>
                    <option value="initials">声母</option>
                    <option value="finals">韵母</option>
                    <option value="simpleFinals">单韵母声调</option>
                    <option value="compoundFinals">复韵母声调</option>
                    <option value="nasalFinals">鼻韵母声调</option>
                    <option value="specialFinals">特殊韵母声调</option>
                    <option value="practice">练习词汇</option>
                    <option value="vocab">生词</option>
                    <option value="sentences">句子</option>
                </select>
                
                <select class="admin-select" id="audio-item">
                    <option value="">选择具体拼音</option>
                </select>
                
                <div class="file-input-wrapper">
                    <input type="file" class="file-input" id="audio-file" accept="audio/*">
                </div>
                
                <button class="admin-button" id="upload-audio">
                    <i class="fas fa-upload"></i> 上传音频
                </button>
            </div>
            
            <div id="upload-status"></div>
        </div>
        
        <footer>
            <p>HSK一级汉语学习小程序 &copy; 2023 - 专为汉语初学者设计</p>
        </footer>
    </div>

    <script>
        // 拼音数据 - 包含所有韵母
        const phoneticsData = {
            initials: [
                { symbol: "b", name: "双唇不送气清塞音" },
                { symbol: "p", name: "双唇送气清塞音" },
                { symbol: "m", name: "双唇鼻音" },
                { symbol: "f", name: "唇齿清擦音" },
                { symbol: "d", name: "舌尖中不送气清塞音" },
                { symbol: "t", name: "舌尖中送气清塞音" },
                { symbol: "n", name: "舌尖中鼻音" },
                { symbol: "l", name: "舌尖中边音" },
                { symbol: "g", name: "舌根不送气清塞音" },
                { symbol: "k", name: "舌根送气清塞音" },
                { symbol: "h", name: "舌根清擦音" },
                { symbol: "j", name: "舌面不送气清塞擦音" },
                { symbol: "q", name: "舌面送气清塞擦音" },
                { symbol: "x", name: "舌面清擦音" },
                { symbol: "zh", name: "舌尖后不送气清塞擦音" },
                { symbol: "ch", name: "舌尖后送气清塞擦音" },
                { symbol: "sh", name: "舌尖后清擦音" },
                { symbol: "r", name: "舌尖后浊擦音" },
                { symbol: "z", name: "舌尖前不送气清塞擦音" },
                { symbol: "c", name: "舌尖前送气清塞擦音" },
                { symbol: "s", name: "舌尖前清擦音" },
                { symbol: "y", name: "零声母" },
                { symbol: "w", name: "零声母" }
            ],
            finals: [
                { symbol: "a", name: "开口呼" },
                { symbol: "o", name: "开口呼" },
                { symbol: "e", name: "开口呼" },
                { symbol: "i", name: "齐齿呼" },
                { symbol: "u", name: "合口呼" },
                { symbol: "ü", name: "撮口呼" },
                { symbol: "ai", name: "复韵母" },
                { symbol: "ei", name: "复韵母" },
                { symbol: "ui", name: "复韵母" },
                { symbol: "ao", name: "复韵母" },
                { symbol: "ou", name: "复韵母" },
                { symbol: "iu", name: "复韵母" },
                { symbol: "ie", name: "复韵母" },
                { symbol: "üe", name: "复韵母" },
                { symbol: "er", name: "特殊韵母" },
                { symbol: "an", name: "鼻韵母" },
                { symbol: "en", name: "鼻韵母" },
                { symbol: "in", name: "鼻韵母" },
                { symbol: "un", name: "鼻韵母" },
                { symbol: "ün", name: "鼻韵母" },
                { symbol: "üan", name: "鼻韵母" },
                { symbol: "ian", name: "鼻韵母" },
                { symbol: "uan", name: "鼻韵母" },
                { symbol: "ang", name: "鼻韵母" },
                { symbol: "eng", name: "鼻韵母" },
                { symbol: "ing", name: "鼻韵母" },
                { symbol: "ong", name: "鼻韵母" },
                { symbol: "iang", name: "特殊韵母" },
                { symbol: "uang", name: "特殊韵母" },
                { symbol: "ueng", name: "特殊韵母" },
                { symbol: "iong", name: "特殊韵母" }
            ],
            simpleFinals: [
                { symbol: "a", name: "开口呼", tones: ["ā", "á", "ǎ", "à"] },
                { symbol: "o", name: "开口呼", tones: ["ō", "ó", "ǒ", "ò"] },
                { symbol: "e", name: "开口呼", tones: ["ē", "é", "ě", "è"] },
                { symbol: "i", name: "齐齿呼", tones: ["ī", "í", "ǐ", "ì"] },
                { symbol: "u", name: "合口呼", tones: ["ū", "ú", "ǔ", "ù"] },
                { symbol: "ü", name: "撮口呼", tones: ["ǖ", "ǘ", "ǚ", "ǜ"] }
            ],
            compoundFinals: [
                { symbol: "ai", name: "复韵母", tones: ["āi", "ái", "ǎi", "ài"] },
                { symbol: "ei", name: "复韵母", tones: ["ēi", "éi", "ěi", "èi"] },
                { symbol: "ui", name: "复韵母", tones: ["uī", "uí", "uǐ", "uì"] },
                { symbol: "ao", name: "复韵母", tones: ["āo", "áo", "ǎo", "ào"] },
                { symbol: "ou", name: "复韵母", tones: ["ōu", "óu", "ǒu", "òu"] },
                { symbol: "iu", name: "复韵母", tones: ["iū", "iú", "iǔ", "iù"] },
                { symbol: "ie", name: "复韵母", tones: ["iē", "ié", "iě", "iè"] },
                { symbol: "üe", name: "复韵母", tones: ["üē", "üé", "üě", "üè"] }
            ],
            nasalFinals: [
                { symbol: "an", name: "鼻韵母", tones: ["ān", "án", "ǎn", "àn"] },
                { symbol: "en", name: "鼻韵母", tones: ["ēn", "én", "ěn", "èn"] },
                { symbol: "in", name: "鼻韵母", tones: ["īn", "ín", "ǐn", "ìn"] },
                { symbol: "un", name: "鼻韵母", tones: ["ūn", "ún", "ǔn", "ùn"] },
                { symbol: "ün", name: "鼻韵母", tones: ["ǖn", "ǘn", "ǚn", "ǜn"] },
                { symbol: "üan", name: "鼻韵母", tones: ["ǖan", "ǘan", "ǚan", "ǜan"] },
                { symbol: "ian", name: "鼻韵母", tones: ["iān", "ián", "iǎn", "iàn"] },
                { symbol: "uan", name: "鼻韵母", tones: ["uān", "uán", "uǎn", "uàn"] },
                { symbol: "ang", name: "鼻韵母", tones: ["āng", "áng", "ǎng", "àng"] },
                { symbol: "eng", name: "鼻韵母", tones: ["ēng", "éng", "ěng", "èng"] },
                { symbol: "ing", name: "鼻韵母", tones: ["īng", "íng", "ǐng", "ìng"] },
                { symbol: "ong", name: "鼻韵母", tones: ["ōng", "óng", "ǒng", "òng"] }
            ],
            specialFinals: [
                { symbol: "er", name: "特殊韵母", tones: ["ēr", "ér", "ěr", "èr"] },
                { symbol: "iang", name: "特殊韵母", tones: ["iāng", "iáng", "iǎng", "iàng"] },
                { symbol: "uang", name: "特殊韵母", tones: ["uāng", "uáng", "uǎng", "uàng"] },
                { symbol: "ueng", name: "特殊韵母", tones: ["uēng", "uéng", "uěng", "uèng"] },
                { symbol: "iong", name: "特殊韵母", tones: ["iōng", "ióng", "iǒng", "iòng"] }
            ]
        };

        // 练习数据
        const practiceData = [
            { pinyin: "bā", character: "八", meaning: "eight" },
            { pinyin: "mā", character: "妈", meaning: "mother" },
            { pinyin: "dà", character: "大", meaning: "big" },
            { pinyin: "tā", character: "他", meaning: "he" },
            { pinyin: "nǐ", character: "你", meaning: "you" },
            { pinyin: "hǎo", character: "好", meaning: "good" },
            { pinyin: "rén", character: "人", meaning: "person" },
            { pinyin: "shuǐ", character: "水", meaning: "water" },
            { pinyin: "shān", character: "山", meaning: "mountain" },
            { pinyin: "tiān", character: "天", meaning: "sky" },
            { pinyin: "dì", character: "地", meaning: "ground" },
            { pinyin: "huǒ", character: "火", meaning: "fire" },
            { pinyin: "mù", character: "木", meaning: "wood" },
            { pinyin: "jīn", character: "金", meaning: "metal" },
            { pinyin: "tǔ", character: "土", meaning: "earth" },
            { pinyin: "ér", character: "儿", meaning: "child" },
            { pinyin: "niǎo", character: "鸟", meaning: "bird" },
            { pinyin: "huā", character: "花", meaning: "flower" },
            { pinyin: "cǎo", character: "草", meaning: "grass" },
            { pinyin: "shù", character: "树", meaning: "tree" }
        ];

        // 韵母声调练习数据
        const tonePracticeData = [
            { pinyin: "mā", character: "妈", meaning: "mother", tone: 1 },
            { pinyin: "má", character: "麻", meaning: "hemp", tone: 2 },
            { pinyin: "mǎ", character: "马", meaning: "horse", tone: 3 },
            { pinyin: "mà", character: "骂", meaning: "scold", tone: 4 },
            { pinyin: "bā", character: "八", meaning: "eight", tone: 1 },
            { pinyin: "bá", character: "拔", meaning: "pull", tone: 2 },
            { pinyin: "bǎ", character: "把", meaning: "handle", tone: 3 },
            { pinyin: "bà", character: "爸", meaning: "father", tone: 4 },
            { pinyin: "yī", character: "一", meaning: "one", tone: 1 },
            { pinyin: "yí", character: "移", meaning: "move", tone: 2 },
            { pinyin: "yǐ", character: "椅", meaning: "chair", tone: 3 },
            { pinyin: "yì", character: "意", meaning: "meaning", tone: 4 },
            { pinyin: "wū", character: "屋", meaning: "house", tone: 1 },
            { pinyin: "wú", character: "无", meaning: "none", tone: 2 },
            { pinyin: "wǔ", character: "五", meaning: "five", tone: 3 },
            { pinyin: "wù", character: "物", meaning: "thing", tone: 4 }
        ];

        // 声调示例数据
        const toneExamples = [
            { pinyin: "mā", character: "妈", meaning: "mother", tone: 1 },
            { pinyin: "má", character: "麻", meaning: "hemp", tone: 2 },
            { pinyin: "mǎ", character: "马", meaning: "horse", tone: 3 },
            { pinyin: "mà", character: "骂", meaning: "scold", tone: 4 },
            { pinyin: "ma", character: "吗", meaning: "question", tone: 0 }
        ];

        // HSK一级生词数据 (50个)
        const vocabData = [
            { pinyin: "nǐ", character: "你", meaning: "you" },
            { pinyin: "hǎo", character: "好", meaning: "good" },
            { pinyin: "zài", character: "在", meaning: "at/in" },
            { pinyin: "shì", character: "是", meaning: "to be" },
            { pinyin: "wǒ", character: "我", meaning: "I/me" },
            { pinyin: "tā", character: "他", meaning: "he/him" },
            { pinyin: "tā", character: "她", meaning: "she/her" },
            { pinyin: "men", character: "们", meaning: "plural marker" },
            { pinyin: "bù", character: "不", meaning: "no/not" },
            { pinyin: "yǒu", character: "有", meaning: "to have" },
            { pinyin: "yī", character: "一", meaning: "one" },
            { pinyin: "èr", character: "二", meaning: "two" },
            { pinyin: "sān", character: "三", meaning: "three" },
            { pinyin: "sì", character: "四", meaning: "four" },
            { pinyin: "wǔ", character: "五", meaning: "five" },
            { pinyin: "liù", character: "六", meaning: "six" },
            { pinyin: "qī", character: "七", meaning: "seven" },
            { pinyin: "bā", character: "八", meaning: "eight" },
            { pinyin: "jiǔ", character: "九", meaning: "nine" },
            { pinyin: "shí", character: "十", meaning: "ten" },
            { pinyin: "rén", character: "人", meaning: "person" },
            { pinyin: "kǒu", character: "口", meaning: "mouth" },
            { pinyin: "shǒu", character: "手", meaning: "hand" },
            { pinyin: "zú", character: "足", meaning: "foot" },
            { pinyin: "mù", character: "目", meaning: "eye" },
            { pinyin: "ěr", character: "耳", meaning: "ear" },
            { pinyin: "kǒu", character: "口", meaning: "mouth" },
            { pinyin: "shé", character: "舌", meaning: "tongue" },
            { pinyin: "yá", character: "牙", meaning: "tooth" },
            { pinyin: "tóu", character: "头", meaning: "head" },
            { pinyin: "xīn", character: "心", meaning: "heart" },
            { pinyin: "rì", character: "日", meaning: "sun/day" },
            { pinyin: "yuè", character: "月", meaning: "moon/month" },
            { pinyin: "shuǐ", character: "水", meaning: "water" },
            { pinyin: "huǒ", character: "火", meaning: "fire" },
            { pinyin: "mù", character: "木", meaning: "wood" },
            { pinyin: "jīn", character: "金", meaning: "metal" },
            { pinyin: "tǔ", character: "土", meaning: "earth" },
            { pinyin: "shàng", character: "上", meaning: "up/above" },
            { pinyin: "xià", character: "下", meaning: "down/below" },
            { pinyin: "zuǒ", character: "左", meaning: "left" },
            { pinyin: "yòu", character: "右", meaning: "right" },
            { pinyin: "dà", character: "大", meaning: "big" },
            { pinyin: "xiǎo", character: "小", meaning: "small" },
            { pinyin: "duō", character: "多", meaning: "many" },
            { pinyin: "shǎo", character: "少", meaning: "few" },
            { pinyin: "cháng", character: "长", meaning: "long" },
            { pinyin: "duǎn", character: "短", meaning: "short" },
            { pinyin: "gāo", character: "高", meaning: "tall/high" },
            { pinyin: "dī", character: "低", meaning: "low" }
        ];

        // HSK一级句子数据 (50个)
        const sentenceData = [
            { pinyin: "Nǐ hǎo", character: "你好", meaning: "Hello" },
            { pinyin: "Zàijiàn", character: "再见", meaning: "Goodbye" },
            { pinyin: "Xièxie", character: "谢谢", meaning: "Thank you" },
            { pinyin: "Bù kèqì", character: "不客气", meaning: "You're welcome" },
            { pinyin: "Duìbuqǐ", character: "对不起", meaning: "Sorry" },
            { pinyin: "Méi guānxi", character: "没关系", meaning: "It's okay" },
            { pinyin: "Wǒ jiào...", character: "我叫...", meaning: "My name is..." },
            { pinyin: "Nǐ jiào shénme míngzi?", character: "你叫什么名字？", meaning: "What's your name?" },
            { pinyin: "Wǒ shì Zhōngguó rén", character: "我是中国人", meaning: "I am Chinese" },
            { pinyin: "Nǐ shì nǎ guó rén?", character: "你是哪国人？", meaning: "Where are you from?" },
            { pinyin: "Wǒ xǐhuan hē chá", character: "我喜欢喝茶", meaning: "I like drinking tea" },
            { pinyin: "Wǒ bù xǐhuan hē kāfēi", character: "我不喜欢喝咖啡", meaning: "I don't like drinking coffee" },
            { pinyin: "Jīntiān tiānqì hěn hǎo", character: "今天天气很好", meaning: "The weather is good today" },
            { pinyin: "Míngtiān huì xià yǔ ma?", character: "明天会下雨吗？", meaning: "Will it rain tomorrow?" },
            { pinyin: "Wǒ qù xuéxiào", character: "我去学校", meaning: "I go to school" },
            { pinyin: "Tā zài jiā", character: "他在家", meaning: "He is at home" },
            { pinyin: "Wǒmen shì péngyǒu", character: "我们是朋友", meaning: "We are friends" },
            { pinyin: "Zhè shì wǒ de shū", character: "这是我的书", meaning: "This is my book" },
            { pinyin: "Nà shì shénme?", character: "那是什么？", meaning: "What is that?" },
            { pinyin: "Zhè shì duōshǎo qián?", character: "这是多少钱？", meaning: "How much is this?" },
            { pinyin: "Wǒ yào yī bēi shuǐ", character: "我要一杯水", meaning: "I want a glass of water" },
            { pinyin: "Nǐ xiǎng chī shénme?", character: "你想吃什么？", meaning: "What do you want to eat?" },
            { pinyin: "Wǒ hěn è", character: "我很饿", meaning: "I'm very hungry" },
            { pinyin: "Wǒ bù è", character: "我不饿", meaning: "I'm not hungry" },
            { pinyin: "Xiànzài jǐ diǎn?", character: "现在几点？", meaning: "What time is it now?" },
            { pinyin: "Xiànzài shì bā diǎn", character: "现在是八点", meaning: "It's eight o'clock now" },
            { pinyin: "Wǒ qī diǎn qǐchuáng", character: "我七点起床", meaning: "I get up at seven" },
            { pinyin: "Wǒ shí diǎn shuìjiào", character: "我十点睡觉", meaning: "I go to bed at ten" },
            { pinyin: "Nǐ huì shuō Yīngyǔ ma?", character: "你会说英语吗？", meaning: "Can you speak English?" },
            { pinyin: "Wǒ huì shuō yīdiǎn Hànyǔ", character: "我会说一点汉语", meaning: "I can speak a little Chinese" },
            { pinyin: "Qǐng màn yīdiǎn shuō", character: "请慢一点说", meaning: "Please speak a little slower" },
            { pinyin: "Wǒ bù míngbái", character: "我不明白", meaning: "I don't understand" },
            { pinyin: "Qǐng zài shuō yī biàn", character: "请再说一遍", meaning: "Please say it again" },
            { pinyin: "Zhège zěnme shuō?", character: "这个怎么说？", meaning: "How do you say this?" },
            { pinyin: "Wǒ xué Hànyǔ", character: "我学汉语", meaning: "I study Chinese" },
            { pinyin: "Nǐ xué Hànyǔ duō jiǔ le?", character: "你学汉语多久了？", meaning: "How long have you been studying Chinese?" },
            { pinyin: "Wǒ xué le yī nián Hànyǔ", character: "我学了一年汉语", meaning: "I've studied Chinese for one year" },
            { pinyin: "Wǒ de jiā zài Běijīng", character: "我的家在北京", meaning: "My home is in Beijing" },
            { pinyin: "Nǐ qùguò Shànghǎi ma?", character: "你去过上海吗？", meaning: "Have you been to Shanghai?" },
            { pinyin: "Wǒ méi qùguò Shànghǎi", character: "我没去过上海", meaning: "I haven't been to Shanghai" },
            { pinyin: "Wǒ xiǎng qù Zhōngguó lǚyóu", character: "我想去中国旅游", meaning: "I want to travel to China" },
            { pinyin: "Zhège hěn hǎochī", character: "这个很好吃", meaning: "This is very delicious" },
            { pinyin: "Wǒ hěn xǐhuan zhège", character: "我很喜欢这个", meaning: "I like this very much" },
            { pinyin: "Nǐ xǐhuan shénme yùndòng?", character: "你喜欢什么运动？", meaning: "What sports do you like?" },
            { pinyin: "Wǒ xǐhuan dǎ lánqiú", character: "我喜欢打篮球", meaning: "I like playing basketball" },
            { pinyin: "Wǒ bù xǐhuan kàn diànshì", character: "我不喜欢看电视", meaning: "I don't like watching TV" },
            { pinyin: "Wǒmen yīqǐ qù ba", character: "我们一起去吧", meaning: "Let's go together" },
            { pinyin: "Míngtiān jiàn", character: "明天见", meaning: "See you tomorrow" },
            { pinyin: "Zhù nǐ shēngrì kuàilè", character: "祝你生日快乐", meaning: "Happy birthday to you" },
            { pinyin: "Xīnnián kuàilè", character: "新年快乐", meaning: "Happy New Year" }
        ];

        // 存储上传的音频
        let uploadedAudios = JSON.parse(localStorage.getItem('uploadedAudios')) || {};
        
        // 音频上下文和振荡器
        let audioContext;
        let currentOscillator;
        let currentAudio;
        
        // 初始化音频上下文
        function initAudio() {
            try {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            } catch (e) {
                console.error("Web Audio API is not supported in this browser");
            }
        }
        
        // 生成拼音元素卡片
        function generatePhoneticsCards() {
            // 生成声母卡片
            const initialsContainer = document.getElementById('initials-container');
            phoneticsData.initials.forEach(initial => {
                const card = document.createElement('div');
                card.className = 'phonetic-card';
                card.setAttribute('data-audio', initial.symbol);
                card.innerHTML = `
                    <div class="phonetic-symbol">${initial.symbol}</div>
                    <div class="phonetic-name">${initial.name}</div>
                    <div class="card-controls">
                        <div class="play-btn">
                            <i class="fas fa-volume-up"></i>
                        </div>
                    </div>
                `;
                card.addEventListener('click', () => playPhonetic(initial.symbol, card));
                initialsContainer.appendChild(card);
            });

            // 生成韵母卡片
            const finalsContainer = document.getElementById('finals-container');
            phoneticsData.finals.forEach(final => {
                const card = document.createElement('div');
                card.className = 'phonetic-card';
                card.setAttribute('data-audio', final.symbol);
                card.innerHTML = `
                    <div class="phonetic-symbol">${final.symbol}</div>
                    <div class="phonetic-name">${final.name}</div>
                    <div class="card-controls">
                        <div class="play-btn">
                            <i class="fas fa-volume-up"></i>
                        </div>
                    </div>
                `;
                card.addEventListener('click', () => playPhonetic(final.symbol, card));
                finalsContainer.appendChild(card);
            });

            // 生成单韵母声调卡片
            const simpleFinalsTonesContainer = document.getElementById('simple-finals-tones-container');
            phoneticsData.simpleFinals.forEach(final => {
                final.tones.forEach((tone, index) => {
                    const card = document.createElement('div');
                    card.className = 'phonetic-card';
                    const audioId = `${final.symbol}${index+1}`;
                    card.setAttribute('data-audio', audioId);
                    card.innerHTML = `
                        <div class="phonetic-symbol">${tone}</div>
                        <div class="phonetic-name">${final.name} - 第${index+1}声</div>
                        <div class="card-controls">
                            <div class="play-btn">
                                <i class="fas fa-volume-up"></i>
                            </div>
                        </div>
                    `;
                    card.addEventListener('click', () => playPhonetic(audioId, card));
                    simpleFinalsTonesContainer.appendChild(card);
                });
            });

            // 生成复韵母声调卡片
            const compoundFinalsTonesContainer = document.getElementById('compound-finals-tones-container');
            phoneticsData.compoundFinals.forEach(final => {
                final.tones.forEach((tone, index) => {
                    const card = document.createElement('div');
                    card.className = 'phonetic-card';
                    const audioId = `${final.symbol}${index+1}`;
                    card.setAttribute('data-audio', audioId);
                    card.innerHTML = `
                        <div class="phonetic-symbol">${tone}</div>
                        <div class="phonetic-name">${final.name} - 第${index+1}声</div>
                        <div class="card-controls">
                            <div class="play-btn">
                                <i class="fas fa-volume-up"></i>
                            </div>
                        </div>
                    `;
                    card.addEventListener('click', () => playPhonetic(audioId, card));
                    compoundFinalsTonesContainer.appendChild(card);
                });
            });

            // 生成鼻韵母声调卡片
            const nasalFinalsTonesContainer = document.getElementById('nasal-finals-tones-container');
            phoneticsData.nasalFinals.forEach(final => {
                final.tones.forEach((tone, index) => {
                    const card = document.createElement('div');
                    card.className = 'phonetic-card';
                    const audioId = `${final.symbol}${index+1}`;
                    card.setAttribute('data-audio', audioId);
                    card.innerHTML = `
                        <div class="phonetic-symbol">${tone}</div>
                        <div class="phonetic-name">${final.name} - 第${index+1}声</div>
                        <div class="card-controls">
                            <div class="play-btn">
                                <i class="fas fa-volume-up"></i>
                            </div>
                        </div>
                    `;
                    card.addEventListener('click', () => playPhonetic(audioId, card));
                    nasalFinalsTonesContainer.appendChild(card);
                });
            });

            // 生成特殊韵母声调卡片
            const specialFinalsTonesContainer = document.getElementById('special-finals-tones-container');
            phoneticsData.specialFinals.forEach(final => {
                final.tones.forEach((tone, index) => {
                    const card = document.createElement('div');
                    card.className = 'phonetic-card';
                    const audioId = `${final.symbol}${index+1}`;
                    card.setAttribute('data-audio', audioId);
                    card.innerHTML = `
                        <div class="phonetic-symbol">${tone}</div>
                        <div class="phonetic-name">${final.name} - 第${index+1}声</div>
                        <div class="card-controls">
                            <div class="play-btn">
                                <i class="fas fa-volume-up"></i>
                            </div>
                        </div>
                    `;
                    card.addEventListener('click', () => playPhonetic(audioId, card));
                    specialFinalsTonesContainer.appendChild(card);
                });
            });
        }

        // 生成练习卡片
        function generatePracticeCards() {
            const practiceContainer = document.getElementById('practice-container');
            practiceData.forEach(item => {
                const card = document.createElement('div');
                card.className = 'practice-card';
                card.setAttribute('data-audio', item.pinyin);
                card.innerHTML = `
                    <div class="pinyin">${item.pinyin}</div>
                    <div class="character">${item.character}</div>
                    <div class="meaning">${item.meaning}</div>
                    <div class="card-controls">
                        <div class="play-btn">
                            <i class="fas fa-volume-up"></i>
                        </div>
                    </div>
                `;
                card.addEventListener('click', () => playPhonetic(item.pinyin, card));
                practiceContainer.appendChild(card);
            });
        }

        // 生成韵母声调练习卡片
        function generateTonePracticeCards() {
            const tonePracticeContainer = document.getElementById('tone-practice-container');
            tonePracticeData.forEach(item => {
                const card = document.createElement('div');
                card.className = 'practice-card';
                card.setAttribute('data-audio', item.pinyin);
                card.innerHTML = `
                    <div class="pinyin">${item.pinyin}</div>
                    <div class="character">${item.character}</div>
                    <div class="meaning">${item.meaning}</div>
                    <div class="card-controls">
                        <div class="play-btn">
                            <i class="fas fa-volume-up"></i>
                        </div>
                    </div>
                `;
                card.addEventListener('click', () => playPhonetic(item.pinyin, card));
                tonePracticeContainer.appendChild(card);
            });
        }

        // 生成生词卡片
        function generateVocabCards() {
            const vocabContainer = document.getElementById('vocab-container');
            vocabData.forEach(item => {
                const card = document.createElement('div');
                card.className = 'vocab-card';
                card.setAttribute('data-audio', item.pinyin);
                card.innerHTML = `
                    <div class="vocab-pinyin">${item.pinyin}</div>
                    <div class="vocab-character">${item.character}</div>
                    <div class="vocab-meaning">${item.meaning}</div>
                    <div class="card-controls">
                        <div class="play-btn">
                            <i class="fas fa-volume-up"></i>
                        </div>
                    </div>
                `;
                card.addEventListener('click', () => playPhonetic(item.pinyin, card));
                vocabContainer.appendChild(card);
            });
        }

        // 生成句子卡片
        function generateSentenceCards() {
            const sentenceContainer = document.getElementById('sentence-container');
            sentenceData.forEach(item => {
                const card = document.createElement('div');
                card.className = 'sentence-card';
                // 将句子中的空格替换为下划线，避免音频ID问题
                const audioId = item.pinyin.replace(/ /g, '_');
                card.setAttribute('data-audio', audioId);
                card.innerHTML = `
                    <div class="sentence-pinyin">${item.pinyin}</div>
                    <div class="sentence-character">${item.character}</div>
                    <div class="sentence-meaning">${item.meaning}</div>
                    <div class="card-controls">
                        <div class="play-btn">
                            <i class="fas fa-volume-up"></i>
                        </div>
                    </div>
                `;
                card.addEventListener('click', () => playPhonetic(audioId, card));
                sentenceContainer.appendChild(card);
            });
        }

        // 生成声调示例卡片
        function generateToneExamples() {
            const tonesExamplesContainer = document.getElementById('tones-examples-container');
            toneExamples.forEach(item => {
                const card = document.createElement('div');
                card.className = 'practice-card';
                card.setAttribute('data-audio', item.pinyin);
                card.innerHTML = `
                    <div class="pinyin">${item.pinyin}</div>
                    <div class="character">${item.character}</div>
                    <div class="meaning">${item.meaning}</div>
                    <div class="play-btn">
                        <i class="fas fa-volume-up"></i>
                    </div>
                `;
                card.addEventListener('click', () => playPhonetic(item.pinyin, card));
                tonesExamplesContainer.appendChild(card);
            });
        }

        // 播放声音函数
        function playPhonetic(symbol, element) {
            // 停止当前播放的声音
            if (currentOscillator) {
                currentOscillator.stop();
            }
            if (currentAudio) {
                currentAudio.pause();
                currentAudio.currentTime = 0;
            }
            
            document.querySelectorAll('.playing').forEach(el => {
                el.classList.remove('playing');
            });
            
            // 添加播放效果
            element.classList.add('playing');
            
            // 检查是否有上传的音频
            if (uploadedAudios[symbol]) {
                // 播放上传的音频
                currentAudio = new Audio(uploadedAudios[symbol]);
                currentAudio.play();
                
                currentAudio.onended = function() {
                    element.classList.remove('playing');
                };
            } else {
                // 使用Web Audio API生成声音
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                // 根据拼音设置频率
                let frequency = 440; // 默认频率
                
                // 为不同的拼音设置不同的频率
                const frequencyMap = {
                    // 声母
                    'b': 196, 'p': 208, 'm': 220, 'f': 233, 'd': 247, 't': 262, 'n': 277, 'l': 294,
                    'g': 311, 'k': 330, 'h': 349, 'j': 370, 'q': 392, 'x': 415, 'zh': 440, 'ch': 466,
                    'sh': 494, 'r': 523, 'z': 554, 'c': 587, 's': 622, 'y': 659, 'w': 698,
                    
                    // 韵母
                    'a': 330, 'o': 349, 'e': 370, 'i': 392, 'u': 415, 'v': 440,
                    'ai': 330, 'ei': 349, 'ui': 370, 'ao': 392, 'ou': 415, 'iu': 440, 'ie': 466, 've': 494,
                    'er': 330, 'an': 349, 'en': 370, 'in': 392, 'un': 415, 'vn': 440, 'van': 466, 'ian': 494, 'uan': 523,
                    'ang': 554, 'eng': 587, 'ing': 622, 'ong': 659, 'iang': 698, 'uang': 740, 'ueng': 784, 'iong': 830,
                    
                    // 单韵母 - 第一声
                    'a1': 330, 'o1': 349, 'e1': 370, 'i1': 392, 'u1': 415, 'v1': 440,
                    // 单韵母 - 第二声
                    'a2': 370, 'o2': 392, 'e2': 415, 'i2': 440, 'u2': 466, 'v2': 494,
                    // 单韵母 - 第三声
                    'a3': 294, 'o3': 311, 'e3': 330, 'i3': 349, 'u3': 370, 'v3': 392,
                    // 单韵母 - 第四声
                    'a4': 440, 'o4': 466, 'e4': 494, 'i4': 523, 'u4': 554, 'v4': 587,
                    
                    // 复韵母 - 第一声
                    'ai1': 330, 'ei1': 349, 'ui1': 370, 'ao1': 392, 'ou1': 415, 'iu1': 440, 'ie1': 466, 've1': 494,
                    // 复韵母 - 第二声
                    'ai2': 370, 'ei2': 392, 'ui2': 415, 'ao2': 440, 'ou2': 466, 'iu2': 494, 'ie2': 523, 've2': 554,
                    // 复韵母 - 第三声
                    'ai3': 294, 'ei3': 311, 'ui3': 330, 'ao3': 349, 'ou3': 370, 'iu3': 392, 'ie3': 415, 've3': 440,
                    // 复韵母 - 第四声
                    'ai4': 440, 'ei4': 466, 'ui4': 494, 'ao4': 523, 'ou4': 554, 'iu4': 587, 'ie4': 622, 've4': 659,
                    
                    // 鼻韵母 - 第一声
                    'an1': 330, 'en1': 349, 'in1': 370, 'un1': 392, 'vn1': 415, 'van1': 440, 'ian1': 466, 'uan1': 494,
                    'ang1': 523, 'eng1': 554, 'ing1': 587, 'ong1': 622,
                    // 鼻韵母 - 第二声
                    'an2': 370, 'en2': 392, 'in2': 415, 'un2': 440, 'vn2': 466, 'van2': 494, 'ian2': 523, 'uan2': 554,
                    'ang2': 587, 'eng2': 622, 'ing2': 659, 'ong2': 698,
                    // 鼻韵母 - 第三声
                    'an3': 294, 'en3': 311, 'in3': 330, 'un3': 349, 'vn3': 370, 'van3': 392, 'ian3': 415, 'uan3': 440,
                    'ang3': 466, 'eng3': 494, 'ing3': 523, 'ong3': 554,
                    // 鼻韵母 - 第四声
                    'an4': 440, 'en4': 466, 'in4': 494, 'un4': 523, 'vn4': 554, 'van4': 587, 'ian4': 622, 'uan4': 659,
                    'ang4': 698, 'eng4': 740, 'ing4': 784, 'ong4': 830,
                    
                    // 特殊韵母 - 第一声
                    'er1': 330, 'iang1': 349, 'uang1': 370, 'ueng1': 392, 'iong1': 415,
                    // 特殊韵母 - 第二声
                    'er2': 370, 'iang2': 392, 'uang2': 415, 'ueng2': 440, 'iong2': 466,
                    // 特殊韵母 - 第三声
                    'er3': 294, 'iang3': 311, 'uang3': 330, 'ueng3': 349, 'iong3': 370,
                    // 特殊韵母 - 第四声
                    'er4': 440, 'iang4': 466, 'uang4': 494, 'ueng4': 523, 'iong4': 554,
                    
                    // 练习词汇
                    'bā': 330, 'mā': 349, 'dà': 392, 'tā': 415, 'nǐ': 440,
                    'hǎo': 466, 'rén': 494, 'shuǐ': 523, 'shān': 554, 'tiān': 587,
                    'dì': 622, 'huǒ': 659, 'mù': 698, 'jīn': 740, 'tǔ': 784,
                    'ér': 330, 'niǎo': 349, 'huā': 370, 'cǎo': 392, 'shù': 415,
                    'má': 370, 'mǎ': 294, 'mà': 440, 'ma': 330,
                    'bá': 370, 'bǎ': 294, 'bà': 440,
                    'yī': 330, 'yí': 370, 'yǐ': 294, 'yì': 440,
                    'wū': 330, 'wú': 370, 'wǔ': 294, 'wù': 440,
                    
                    // 生词
                    'zài': 330, 'shì': 349, 'wǒ': 370, 'men': 392, 'bù': 415,
                    'yǒu': 440, 'yī': 466, 'èr': 494, 'sān': 523, 'sì': 554,
                    'wǔ': 587, 'liù': 622, 'qī': 659, 'bā': 698, 'jiǔ': 740,
                    'shí': 784, 'kǒu': 830, 'shǒu': 330, 'zú': 349, 'mù': 370,
                    'ěr': 392, 'shé': 415, 'yá': 440, 'tóu': 466, 'xīn': 494,
                    'rì': 523, 'yuè': 554, 'shàng': 587, 'xià': 622, 'zuǒ': 659,
                    'yòu': 698, 'dà': 740, 'xiǎo': 784, 'duō': 830, 'shǎo': 330,
                    'cháng': 349, 'duǎn': 370, 'gāo': 392, 'dī': 415,
                    
                    // 句子 - 使用下划线代替空格
                    'Nǐ_hǎo': 330, 'Zàijiàn': 349, 'Xièxie': 370, 'Bù_kèqì': 392, 'Duìbuqǐ': 415,
                    'Méi_guānxi': 440, 'Wǒ_jiào...': 466, 'Nǐ_jiào_shénme_míngzi?': 494, 'Wǒ_shì_Zhōngguó_rén': 523, 'Nǐ_shì_nǎ_guó_rén?': 554,
                    'Wǒ_xǐhuan_hē_chá': 587, 'Wǒ_bù_xǐhuan_hē_kāfēi': 622, 'Jīntiān_tiānqì_hěn_hǎo': 659, 'Míngtiān_huì_xià_yǔ_ma?': 698, 'Wǒ_qù_xuéxiào': 740,
                    'Tā_zài_jiā': 784, 'Wǒmen_shì_péngyǒu': 830, 'Zhè_shì_wǒ_de_shū': 330, 'Nà_shì_shénme?': 349, 'Zhè_shì_duōshǎo_qián?': 370,
                    'Wǒ_yào_yī_bēi_shuǐ': 392, 'Nǐ_xiǎng_chī_shénme?': 415, 'Wǒ_hěn_è': 440, 'Wǒ_bù_è': 466, 'Xiànzài_jǐ_diǎn?': 494,
                    'Xiànzài_shì_bā_diǎn': 523, 'Wǒ_qī_diǎn_qǐchuáng': 554, 'Wǒ_shí_diǎn_shuìjiào': 587, 'Nǐ_huì_shuō_Yīngyǔ_ma?': 622, 'Wǒ_huì_shuō_yīdiǎn_Hànyǔ': 659,
                    'Qǐng_màn_yīdiǎn_shuō': 698, 'Wǒ_bù_míngbái': 740, 'Qǐng_zài_shuō_yī_biàn': 784, 'Zhège_zěnme_shuō?': 830, 'Wǒ_xué_Hànyǔ': 330,
                    'Nǐ_xué_Hànyǔ_duō_jiǔ_le?': 349, 'Wǒ_xué_le_yī_nián_Hànyǔ': 370, 'Wǒ_de_jiā_zài_Běijīng': 392, 'Nǐ_qùguò_Shànghǎi_ma?': 415, 'Wǒ_méi_qùguò_Shànghǎi': 440,
                    'Wǒ_xiǎng_qù_Zhōngguó_lǚyóu': 466, 'Zhège_hěn_hǎochī': 494, 'Wǒ_hěn_xǐhuan_zhège': 523, 'Nǐ_xǐhuan_shénme_yùndòng?': 554, 'Wǒ_xǐhuan_dǎ_lánqiú': 587,
                    'Wǒ_bù_xǐhuan_kàn_diànshì': 622, 'Wǒmen_yīqǐ_qù_ba': 659, 'Míngtiān_jiàn': 698, 'Zhù_nǐ_shēngrì_kuàilè': 740, 'Xīnnián_kuàilè': 784
                };
                
                if (frequencyMap[symbol]) {
                    frequency = frequencyMap[symbol];
                }
                
                oscillator.type = 'sine';
                oscillator.frequency.value = frequency;
                
                // 设置音量
                gainNode.gain.value = 0.3;
                
                // 连接节点
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                // 开始播放
                oscillator.start();
                
                // 保存当前振荡器以便停止
                currentOscillator = oscillator;
                
                // 设置停止时间
                setTimeout(() => {
                    oscillator.stop();
                    element.classList.remove('playing');
                }, 800);
            }
        }
        
        // 播放所有声母
        function playAllInitials() {
            const initials = document.querySelectorAll('#initials-container .phonetic-card');
            playSequence(initials, 0);
        }
        
        // 播放所有韵母
        function playAllFinals() {
            const finals = document.querySelectorAll('#finals-container .phonetic-card');
            playSequence(finals, 0);
        }
        
        // 播放所有单韵母声调
        function playAllSimpleTones() {
            const tones = document.querySelectorAll('#simple-finals-tones-container .phonetic-card');
            playSequence(tones, 0);
        }
        
        // 播放所有复韵母声调
        function playAllCompoundTones() {
            const tones = document.querySelectorAll('#compound-finals-tones-container .phonetic-card');
            playSequence(tones, 0);
        }
        
        // 播放所有练习
        function playAllPractice() {
            const practice = document.querySelectorAll('#practice-container .practice-card');
            playSequence(practice, 0);
        }
        
        // 播放所有生词
        function playAllVocab() {
            const vocab = document.querySelectorAll('#vocab-container .vocab-card');
            playSequence(vocab, 0);
        }
        
        // 播放所有句子
        function playAllSentences() {
            const sentences = document.querySelectorAll('#sentence-container .sentence-card');
            playSequence(sentences, 0);
        }
        
        // 顺序播放序列
        function playSequence(elements, index) {
            if (index >= elements.length) return;
            
            const element = elements[index];
            const audio = element.getAttribute('data-audio');
            
            playPhonetic(audio, element);
            
            setTimeout(() => {
                playSequence(elements, index + 1);
            }, 1500);
        }
        
        // 随机排序练习
        function shufflePractice() {
            const container = document.getElementById('practice-container');
            const cards = Array.from(container.children);
            
            // 随机排序
            for (let i = cards.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                container.appendChild(container.children[j]);
            }
        }
        
        // 随机排序生词
        function shuffleVocab() {
            const container = document.getElementById('vocab-container');
            const cards = Array.from(container.children);
            
            // 随机排序
            for (let i = cards.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                container.appendChild(container.children[j]);
            }
        }
        
        // 随机排序句子
        function shuffleSentences() {
            const container = document.getElementById('sentence-container');
            const cards = Array.from(container.children);
            
            // 随机排序
            for (let i = cards.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                container.appendChild(container.children[j]);
            }
        }
        
        // 更新音频项目选择
        function updateAudioItems() {
            const type = document.getElementById('audio-type').value;
            const itemSelect = document.getElementById('audio-item');
            
            // 清空现有选项
            itemSelect.innerHTML = '<option value="">选择具体拼音</option>';
            
            if (!type) return;
            
            // 根据类型添加选项
            if (type === 'initials') {
                phoneticsData.initials.forEach(item => {
                    const option = document.createElement('option');
                    option.value = item.symbol;
                    option.textContent = `${item.symbol} - ${item.name}`;
                    itemSelect.appendChild(option);
                });
            } else if (type === 'finals') {
                phoneticsData.finals.forEach(final => {
                    const option = document.createElement('option');
                    option.value = final.symbol;
                    option.textContent = `${final.symbol} - ${final.name}`;
                    itemSelect.appendChild(option);
                });
            } else if (type === 'simpleFinals') {
                phoneticsData.simpleFinals.forEach(final => {
                    final.tones.forEach((tone, index) => {
                        const option = document.createElement('option');
                        option.value = `${final.symbol}${index+1}`;
                        option.textContent = `${tone} - ${final.name} (第${index+1}声)`;
                        itemSelect.appendChild(option);
                    });
                });
            } else if (type === 'compoundFinals') {
                phoneticsData.compoundFinals.forEach(final => {
                    final.tones.forEach((tone, index) => {
                        const option = document.createElement('option');
                        option.value = `${final.symbol}${index+1}`;
                        option.textContent = `${tone} - ${final.name} (第${index+1}声)`;
                        itemSelect.appendChild(option);
                    });
                });
            } else if (type === 'nasalFinals') {
                phoneticsData.nasalFinals.forEach(final => {
                    final.tones.forEach((tone, index) => {
                        const option = document.createElement('option');
                        option.value = `${final.symbol}${index+1}`;
                        option.textContent = `${tone} - ${final.name} (第${index+1}声)`;
                        itemSelect.appendChild(option);
                    });
                });
            } else if (type === 'specialFinals') {
                phoneticsData.specialFinals.forEach(final => {
                    final.tones.forEach((tone, index) => {
                        const option = document.createElement('option');
                        option.value = `${final.symbol}${index+1}`;
                        option.textContent = `${tone} - ${final.name} (第${index+1}声)`;
                        itemSelect.appendChild(option);
                    });
                });
            } else if (type === 'practice') {
                practiceData.forEach(item => {
                    const option = document.createElement('option');
                    option.value = item.pinyin;
                    option.textContent = `${item.pinyin} - ${item.character} (${item.meaning})`;
                    itemSelect.appendChild(option);
                });
            } else if (type === 'vocab') {
                vocabData.forEach(item => {
                    const option = document.createElement('option');
                    option.value = item.pinyin;
                    option.textContent = `${item.pinyin} - ${item.character} (${item.meaning})`;
                    itemSelect.appendChild(option);
                });
            } else if (type === 'sentences') {
                sentenceData.forEach(item => {
                    // 将句子中的空格替换为下划线，避免音频ID问题
                    const audioId = item.pinyin.replace(/ /g, '_');
                    const option = document.createElement('option');
                    option.value = audioId;
                    option.textContent = `${item.pinyin} - ${item.character} (${item.meaning})`;
                    itemSelect.appendChild(option);
                });
            }
        }
        
        // 上传音频
        function uploadAudio() {
            const type = document.getElementById('audio-type').value;
            const item = document.getElementById('audio-item').value;
            const fileInput = document.getElementById('audio-file');
            
            if (!type || !item) {
                showUploadStatus('请选择拼音类型和具体拼音', 'error');
                return;
            }
            
            if (!fileInput.files.length) {
                showUploadStatus('请选择音频文件', 'error');
                return;
            }
            
            const file = fileInput.files[0];
            
            // 检查文件类型
            if (!file.type.startsWith('audio/')) {
                showUploadStatus('请选择音频文件', 'error');
                return;
            }
            
            // 读取文件
            const reader = new FileReader();
            reader.onload = function(e) {
                // 保存音频数据
                uploadedAudios[item] = e.target.result;
                localStorage.setItem('uploadedAudios', JSON.stringify(uploadedAudios));
                
                showUploadStatus(`音频 "${item}" 上传成功！`, 'success');
                
                // 清空文件输入
                fileInput.value = '';
            };
            
            reader.onerror = function() {
                showUploadStatus('文件读取失败', 'error');
            };
            
            reader.readAsDataURL(file);
        }
        
        // 显示上传状态
        function showUploadStatus(message, type) {
            const statusEl = document.getElementById('upload-status');
            statusEl.textContent = message;
            statusEl.className = 'audio-status ' + type;
        }

        // 标签页切换功能
        function setupTabs() {
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // 移除所有活动状态
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(tc => tc.classList.remove('active'));
                    
                    // 添加当前活动状态
                    tab.classList.add('active');
                    const tabId = tab.getAttribute('data-tab');
                    document.getElementById(tabId).classList.add('active');
                });
            });
        }

        // 初始化
        document.addEventListener('DOMContentLoaded', () => {
            initAudio();
            generatePhoneticsCards();
            generatePracticeCards();
            generateTonePracticeCards();
            generateVocabCards();
            generateSentenceCards();
            generateToneExamples();
            setupTabs();
            
            // 添加按钮事件监听
            document.getElementById('play-all-initials').addEventListener('click', playAllInitials);
            document.getElementById('play-all-finals').addEventListener('click', playAllFinals);
            document.getElementById('play-all-simple-tones').addEventListener('click', playAllSimpleTones);
            document.getElementById('play-all-compound-tones').addEventListener('click', playAllCompoundTones);
            document.getElementById('play-all-practice').addEventListener('click', playAllPractice);
            document.getElementById('play-all-vocab').addEventListener('click', playAllVocab);
            document.getElementById('play-all-sentences').addEventListener('click', playAllSentences);
            document.getElementById('shuffle-practice').addEventListener('click', shufflePractice);
            document.getElementById('shuffle-vocab').addEventListener('click', shuffleVocab);
            document.getElementById('shuffle-sentences').addEventListener('click', shuffleSentences);
            
            // 添加上传相关事件
            document.getElementById('audio-type').addEventListener('change', updateAudioItems);
            document.getElementById('upload-audio').addEventListener('click', uploadAudio);
        });
    </script>
</body>
</html>
